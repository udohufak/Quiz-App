let questions = [
      {
        numb: 1,
        question: "What is the purpose of the 'setTimeout' function in JavaScript?",
        options: [
          "It sets a timer to execute a function after a specified delay",
          "It creates a new variable",
          "It adds a new element to an array",
          "It defines a new object"
        ],
        answer: "It sets a timer to execute a function after a specified delay"
      },
      {
        numb: 2,
        question: "Which method is used to remove the last element from an array in JavaScript?",
        options: [
          "pop()",
          "removeLast()",
          "slice()",
          "shift()"
        ],
        answer: "pop()"
      },
      {
        numb: 3,
        question: "What is the purpose of the '===' operator in JavaScript?",
        options: [
          "It is used to assign a value to a variable",
          "It is used to compare two values for equality, both in value and data type",
          "It is used to define a new function",
          "It is used to concatenate strings"
        ],
        answer: "It is used to compare two values for equality, both in value and data type"
      },
      {
        numb: 4,
        question: "What is the result of '5' + '2' in JavaScript?",
        options: [
          "7",
          "\"52\"",
          "52",
          "\"52\""
        ],
        answer: "\"52\""
      },
      {
        numb: 5,
        question: "How do you check if a variable `x` is equal to 10 and of the same data type?",
        options: [
          "x === 10;",
          "x == 10;",
          "x = 10;",
          "x.equivalent(10);"
        ],
        answer: "x === 10;"
      },
  

     {
     numb: 6,
     question: "What is the purpose of the `indexOf()` method in JavaScript?",
     answer: "It returns the index of the first occurrence of a specified value in a string.",
     options: [
       "It returns the index of the first occurrence of a specified value in a string.",
       "It returns the index of the last occurrence of a specified value in an array.",
       "It checks if a value exists in an array",
       "It removes an element from an array."
    ]
   },

   
   {
    numb: 7,
    question: "How do you convert a number to a string in JavaScript?",
    answer: "toString()",
    options: [
      "toString()",
      "toStr()",
      "numberToString() ",
      "convertToString()"
   ]
    },

    {
        numb: 8,
        question: " What does the `Array.isArray()` method do in JavaScript?",
        answer: "It checks if an object is an instance of the Array class",
        options: [
          "It creates a new array. ",
          "It checks if an object is an instance of the Array class.",
          "It converts an array to a string",
          "It concatenates arrays"
       ]
        },


   {
    numb: 9,
    question: "What does the 'typeof' operator return in JavaScript?",
    options: [
      "The data type of a variable",
      "A boolean value",
      "The size of an array",
      "The length of a string"
    ],
    answer: "The data type of a variable"
  },
  {
    numb: 10,
    question: "Which of the following is NOT a valid loop in JavaScript?",
    options: [
      "for loop",
      "while loop",
      "repeat loop",
      "do-while loop"
    ],
    answer: "repeat loop"
  },
  {
    numb: 11,
    question: "What is the purpose of the 'setTimeout' function in JavaScript?",
    options: [
      "It sets a timer to execute a function after a specified delay",
      "It creates a new variable",
      "It adds a new element to an array",
      "It defines a new object"
    ],
    answer: "It sets a timer to execute a function after a specified delay"
  },
  {
    numb: 12,
    question: "Which method is used to remove the last element from an array in JavaScript?",
    options: [
      "pop()",
      "removeLast()",
      "slice()",
      "shift()"
    ],
    answer: "pop()"
  },
  {
    numb: 13,
    question: "What is the purpose of the '===' operator in JavaScript?",
    options: [
      "It is used to assign a value to a variable",
      "It is used to compare two values for equality, both in value and data type",
      "It is used to define a new function",
      "It is used to concatenate strings"
    ],
    answer: "It is used to compare two values for equality, both in value and data type"
  },
  {
    numb: 14,
    question: "What is the result of '5' + '2' in JavaScript?",
    options: [
      "7",
      "\"52\"",
      "52",
      "\"52\""
    ],
    answer: "\"52\""
  },
  {
    numb: 15,
    question: "How do you check if a variable `x` is equal to 10 and of the same data type?",
    options: [
      "x === 10;",
      "x == 10;",
      "x = 10;",
      "x.equivalent(10);"
    ],
    answer: "x === 10;"
  },
  {
    numb: 16,
    question: "Which keyword is used to define a function in JavaScript?",
    options: [
      "func",
      "function",
      "def",
      "method"
    ],
    answer: "function"
  },
  {
    numb: 17,
    question: "What is the purpose of the 'return' statement in a function?",
    options: [
      "It defines a new variable.",
      "It exits the function and specifies a value to be returned.",
      "It declares a loop.",
      "It creates a new object."
    ],
    answer: "It exits the function and specifies a value to be returned."
  },
  {
    numb: 18,
    question: "How do you call a function named `myFunction`?",
    options: [
      "call myFunction;",
      "invoke myFunction;",
      "myFunction();",
      "function.myFunction();"
    ],
    answer: "myFunction();"
  },
  {
    numb: 19,
    question: "What does the 'typeof' operator return in JavaScript?",
    options: [
      "The data type of a variable",
      "A boolean value",
      "The size of an array",
      "The length of a string"
    ],
    answer: "The data type of a variable"
  },
  {
    numb: 20,
    question: "Which of the following is NOT a valid loop in JavaScript?",
    options: [
      "for loop",
      "while loop",
      "repeat loop",
      "do-while loop"
    ],
    answer: "repeat loop"
  },
  {
    numb: 21,
    question: "What is the purpose of the 'setTimeout' function in JavaScript?",
    options: [
      "It sets a timer to execute a function after a specified delay",
      "It creates a new variable",
      "It adds a new element to an array",
      "It defines a new object"
    ],
    answer: "It sets a timer to execute a function after a specified delay"
  },
  {
    numb: 22,
    question: "Which method is used to remove the last element from an array in JavaScript?",
    options: [
      "pop()",
      "removeLast()",
      "slice()",
      "shift()"
    ],
    answer: "pop()"
  },
  {
    numb: 23,
    question: "What is the purpose of the '===' operator in JavaScript?",
    options: [
      "It is used to assign a value to a variable",
      "It is used to compare two values for equality, both in value and data type",
      "It is used to define a new function",
      "It is used to concatenate strings"
    ],
    answer: "It is used to compare two values for equality, both in value and data type"
  },
  {
    numb: 24,
    question: "What is the result of '5' + '2' in JavaScript?",
    options: [
      "7",
      "\"52\"",
      "52",
      "\"52\""
    ],
    answer: "\"52\""
  },
  {
    numb: 25,
    question: "How do you check if a variable `x` is equal to 10 and of the same data type?",
    options: [
      "x === 10;",
      "x == 10;",
      "x = 10;",
      "x.equivalent(10);"
    ],
    answer: "x === 10;"
  },
  {
    numb: 26,
    question: "Which keyword is used to define a function in JavaScript?",
    options: [
      "func",
      "function",
      "def",
      "method"
    ],
    answer: "function"
  },
  {
    numb: 27,
    question: "What is the purpose of the 'return' statement in a function?",
    options: [
      "It defines a new variable.",
      "It exits the function and specifies a value to be returned.",
      "It declares a loop.",
      "It creates a new object."
    ],
    answer: "It exits the function and specifies a value to be returned."
  },
  {
    numb: 28,
    question: "How do you call a function named `myFunction`?",
    options: [
      "call myFunction;",
      "invoke myFunction;",
      "myFunction();",
      "function.myFunction();"
    ],
    answer: "myFunction();"
  },
  {
    numb: 29,
    question: "What does the 'typeof' operator return in JavaScript?",
    options: [
      "The data type of a variable",
      "A boolean value",
      "The size of an array",
      "The length of a string"
    ],
    answer: "The data type of a variable"
  },
  {
    numb: 30,
    question: "Which of the following is NOT a valid loop in JavaScript?",
    options: [
      "for loop",
      "while loop",
      "repeat loop",
      "do-while loop"
    ],
    answer: "repeat loop"
  },
  {
    numb: 31,
    question: "What is the purpose of the 'setTimeout' function in JavaScript?",
    options: [
      "It sets a timer to execute a function after a specified delay",
      "It creates a new variable",
      "It adds a new element to an array",
      "It defines a new object"
    ],
    answer: "It sets a timer to execute a function after a specified delay"
  },
  {
    numb: 32,
    question: "Which method is used to remove the last element from an array in JavaScript?",
    options: [
      "pop()",
      "removeLast()",
      "slice()",
      "shift()"
    ],
    answer: "pop()"
  },
  {
    numb: 33,
    question: "What is the purpose of the '===' operator in JavaScript?",
    options: [
      "It is used to assign a value to a variable",
      "It is used to compare two values for equality, both in value and data type",
      "It is used to define a new function",
      "It is used to concatenate strings"
    ],
    answer: "It is used to compare two values for equality, both in value and data type"
  },
  {
    numb: 34,
    question: "What is the result of '5' + '2' in JavaScript?",
    options: [
      "7",
      "\"52\"",
      "52",
      "\"52\""
    ],
    answer: "\"52\""
  },
  {
    numb: 35,
    question: "How do you check if a variable `x` is equal to 10 and of the same data type?",
    options: [
      "x === 10;",
      "x == 10;",
      "x = 10;",
      "x.equivalent(10);"
    ],
    answer: "x === 10;"
  },
  {
    numb: 36,
    question: "Which keyword is used to define a function in JavaScript?",
    options: [
      "func",
      "function",
      "def",
      "method"
    ],
    answer: "function"
  },
  {
    numb: 37,
    question: "What is the purpose of the 'return' statement in a function?",
    options: [
      "It defines a new variable.",
      "It exits the function and specifies a value to be returned.",
      "It declares a loop.",
      "It creates a new object."
    ],
    answer: "It exits the function and specifies a value to be returned."
  },
  {
    numb: 38,
    question: "How do you call a function named `myFunction`?",
    options: [
      "call myFunction;",
      "invoke myFunction;",
      "myFunction();",
      "function.myFunction();"
    ],
    answer: "myFunction();"
  },
  {
    numb: 39,
    question: "What does the 'typeof' operator return in JavaScript?",
    options: [
      "The data type of a variable",
      "A boolean value",
      "The size of an array",
      "The length of a string"
    ],
    answer: "The data type of a variable"
  },
  {
    numb: 40,
    question: "Which of the following is NOT a valid loop in JavaScript?",
    options: [
      "for loop",
      "while loop",
      "repeat loop",
      "do-while loop"
    ],
    answer: "repeat loop"
  },

  {
    numb: 41,
    question: "What is the purpose of the 'NaN' value in JavaScript?",
    options: [
      "It represents a non-numeric value",
      "It represents a negative number",
      "It represents a null value",
      "It represents an empty string"
    ],
    answer: "It represents a non-numeric value"
  },
  {
    numb: 42,
    question: "Which operator is used for strict equality comparison in JavaScript?",
    options: [
      "==",
      "===",
      "!=",
      "!=="
    ],
    answer: "==="
  },
  {
    numb: 43,
    question: "What is the purpose of the 'this' keyword in JavaScript?",
    options: [
      "It refers to the previous function in the call stack",
      "It refers to the next function in the call stack",
      "It refers to the current function being executed",
      "It refers to the global object"
    ],
    answer: "It refers to the current function being executed"
  },
  {
    numb: 44,
    question: "Which built-in method is used to sort an array in JavaScript?",
    options: [
      "sort()",
      "order()",
      "arrange()",
      "sequence()"
    ],
    answer: "sort()"
  },
  {
    numb: 45,
    question: "What is the purpose of the 'map' method in JavaScript?",
    options: [
      "It adds a new element to an array",
      "It creates a copy of an array with transformed elements",
      "It removes the last element from an array",
      "It searches for a specific element in an array"
    ],
    answer: "It creates a copy of an array with transformed elements"
  },
  {
    numb: 46,
    question: "Which method is used to add new elements to the end of an array in JavaScript?",
    options: [
      "push()",
      "append()",
      "addToEnd()",
      "insert()"
    ],
    answer: "push()"
  },
  {
    numb: 47,
    question: "What is the purpose of the 'filter' method in JavaScript?",
    options: [
      "It creates a new array with filtered elements that pass a test",
      "It modifies the existing array to remove elements that pass a test",
      "It sorts the array in ascending order",
      "It reverses the order of elements in the array"
    ],
    answer: "It creates a new array with filtered elements that pass a test"
  },
  {
    numb: 48,
    question: "What does the 'indexOf' method return if the searched element is not found in the array?",
    options: [
      "-1",
      "0",
      "undefined",
      "null"
    ],
    answer: "-1"
  },
  {
    numb: 49,
    question: "Which function is used to convert a JSON string to a JavaScript object?",
    options: [
      "JSON.parse()",
      "JSON.stringify()",
      "JSON.convert()",
      "JSON.decode()"
    ],
    answer: "JSON.parse()"
  },
  {
    numb: 50,
    question: "What is the purpose of the 'addEventListener' method in JavaScript?",
    options: [
      "It creates a new event",
      "It removes an event",
      "It attaches an event handler to an element",
      "It triggers an event"
    ],
    answer: "It attaches an event handler to an element"
  }
  
];

const start_btn = document.querySelector(".start_btn button");
const info_box = document.querySelector(".info_box");
const exit_btn = info_box.querySelector(".buttons .quit");
const continue_btn = info_box.querySelector(".buttons .restart");
const quiz_box = document.querySelector(".quiz_box");
const result_box = document.querySelector(".result_box");
const option_list = document.querySelector(".option_list");
const time_line = document.querySelector("header .time_line");
const timeText = document.querySelector(".timer .time_left_txt");
const timeCount = document.querySelector(".timer .timer_sec");

start_btn.onclick = () => {
    info_box.classList.add("activeInfo");
}

exit_btn.onclick = () => {
    info_box.classList.remove("activeInfo");
}

continue_btn.onclick = () => {
    info_box.classList.remove("activeInfo");
    quiz_box.classList.add("activeQuiz");
    showQuetions(0);
    queCounter(1);
    startTimer(15);
    startTimerLine(0);
}

let timeValue = 15;
let que_count = 0;
let que_numb = 1;
let userScore = 0;
let counter;
let counterLine;
let widthValue = 0;

const restart_quiz = result_box.querySelector(".buttons .restart");
const quit_quiz = result_box.querySelector(".buttons .quit");

restart_quiz.onclick = () => {
    quiz_box.classList.add("activeQuiz");
    result_box.classList.remove("activeResult");
    timeValue = 15;
    que_count = 0;
    que_numb = 1;
    userScore = 0;
    widthValue = 0;
    showQuetions(que_count);
    queCounter(que_numb);
    clearInterval(counter);
    clearInterval(counterLine);
    startTimer(timeValue);
    startTimerLine(widthValue);
    timeText.textContent = "Time Left";
    next_btn.classList.remove("show");
}

quit_quiz.onclick = () => {
    window.location.reload();
}

const next_btn = document.querySelector("footer .next_btn");
const bottom_ques_counter = document.querySelector("footer .total_que");

next_btn.onclick = () => {
    if (que_count < questions.length - 1) {
        que_count++;
        que_numb++;
        showQuetions(que_count);
        queCounter(que_numb);
        clearInterval(counter);
        clearInterval(counterLine);
        startTimer(timeValue);
        startTimerLine(widthValue);
        timeText.textContent = "Time Left";
        next_btn.classList.remove("show");
    } else {
        clearInterval(counter);
        clearInterval(counterLine);
        showResult();
    }
}

function showQuetions(index) {
    const que_text = document.querySelector(".que_text");
    let que_tag = '<span>' + questions[index].numb + ". " + questions[index].question + '</span>';
    let option_tag = '<div class="option"><span>' + questions[index].options[0] + '</span></div>'
        + '<div class="option"><span>' + questions[index].options[1] + '</span></div>'
        + '<div class="option"><span>' + questions[index].options[2] + '</span></div>'
        + '<div class="option"><span>' + questions[index].options[3] + '</span></div>';
    que_text.innerHTML = que_tag;
    option_list.innerHTML = option_tag;
    const option = option_list.querySelectorAll(".option");
    for (i = 0; i < option.length; i++) {
        option[i].setAttribute("onclick", "optionSelected(this)");
    }
}

let tickIconTag = '<div class="icon tick"><i class="fa-solid fa-check"></i></div>';
let crossIconTag = '<div class="icon cross"><i class="fa-solid fa-x"></i></div>';

function optionSelected(answer) {
    clearInterval(counter);
    clearInterval(counterLine);
    let userAns = answer.textContent;
    let correcAns = questions[que_count].answer;
    const allOptions = option_list.children.length;
    if (userAns == correcAns) {
        userScore++;
        answer.classList.add("correct");
        answer.insertAdjacentHTML("beforeend", tickIconTag);
    } else {
        answer.classList.add("incorrect");
        answer.insertAdjacentHTML("beforeend", crossIconTag);
        for (i = 0; i < allOptions; i++) {
            if (option_list.children[i].textContent == correcAns) {
                option_list.children[i].setAttribute("class", "option correct");
                option_list.children[i].insertAdjacentHTML("beforeend", tickIconTag);
            }
        }
    }
    for (i = 0; i < allOptions; i++) {
        option_list.children[i].classList.add("disabled");
    }
    next_btn.classList.add("show");
}

function showResult() {
    info_box.classList.remove("activeInfo");
    quiz_box.classList.remove("activeQuiz");
    result_box.classList.add("activeResult");
    const scoreText = result_box.querySelector(".score_text");
    if (userScore > 3) {
        let scoreTag = '<span>and congrats! 🎉, You got <p>' + userScore + '</p> out of <p>' + questions.length + '</p></span>';
        scoreText.innerHTML = scoreTag;
    } else if (userScore > 1) {
        let scoreTag = '<span>and nice 😎, You got <p>' + userScore + '</p> out of <p>' + questions.length + '</p></span>';
        scoreText.innerHTML = scoreTag;
    } else {
        let scoreTag = '<span>and sorry 😐, You got only <p>' + userScore + '</p> out of <p>' + questions.length + '</p></span>';
        scoreText.innerHTML = scoreTag;
    }
}

function startTimer(time) {
    counter = setInterval(timer, 1000);
    function timer() {
        timeCount.textContent = time;
        time--;
        if (time < 9) {
            let addZero = timeCount.textContent;
            timeCount.textContent = "0" + addZero;
        }
        if (time < 0) {
            clearInterval(counter);
            timeText.textContent = "Time Off";
            const allOptions = option_list.children.length;
            let correcAns = questions[que_count].answer;
            for (i = 0; i < allOptions; i++) {
                if (option_list.children[i].textContent == correcAns) {
                    option_list.children[i].setAttribute("class", "option correct");
                    option_list.children[i].insertAdjacentHTML("beforeend", tickIconTag);
                }
            }
            for (i = 0; i < allOptions; i++) {
                option_list.children[i].classList.add("disabled");
            }
            next_btn.classList.add("show");
        }
    }
}

function startTimerLine(time) {
    counterLine = setInterval(timer, 29);
    function timer() {
        time += 1;
        time_line.style.width = time + "px";
        if (time > 549) {
            clearInterval(counterLine);
        }
    }
}

function queCounter(index) {
    let totalQueCounTag = '<span><p>' + index + '</p> of <p>' + questions.length + '</p> Questions</span>';
    bottom_ques_counter.innerHTML = totalQueCounTag;
}
